<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" /> <!-- Character encoding for the webpage -->
<meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Required for Internet Explorer compatibility -->

<!-- Metadata for search engines -->
<title>Quiz | Quizzatopia - Explore a World of Quizzes</title>
<meta name="generator" content="Quizzatopia" /> 
	
<meta name="description" content=" Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation.">

	<meta itemprop="name" content="Quizzatopia">
<meta property="og:title" content="Quizzatopia - Explore a World of Quizzes">
<meta property="og:image" content="https://www.quizzatopia.com/images/logo.png">
<meta name="Distribution" content="Global" />
<meta name="Rating" content="General" />
<meta name="copyright" content="Quizzatopia">
<meta name="language" content="English">
<meta name="reply-to" content="quizzatopia@gmail.com">
<meta name="generator" content="Adobe Dreamweaver">
<meta name="Developer" content="Ron Wilson II">
<!-- Links to favicon images for various devices -->
<link rel="icon" sizes="192x192" href="/favicon.ico">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="icon" type="image/x-icon" href="/favicon.ico"> <!-- Alternate link to favicon image -->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> <!-- Required for mobile devices -->
<meta property="og:type" content="website">

	
<meta property="og:description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta name="keywords" content="quizzing, quizzes, learning, education, fun, trivia, exam preparation, sign up, log in, compete, points, achievements">
<meta property="og:url" content="https://www.quizzatopia.com">

	
<meta name="robots" content="index,follow">
	<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@Quizzatopia">
<meta name="twitter:title" content="Quizzatopia - Explore a World of Quizzes">
<meta name="twitter:description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta name="twitter:image" content="https://www.quizzatopia.com/images/logo.png">
<meta name="twitter:url" content="https://www.quizzatopia.com">

<!-- Open Graph metadata for Facebook -->
<meta property="og:site_name" content="Quizzatopia">
<meta property="og:locale" content="en_US">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Schema.org markup for Google+ -->
<meta itemprop="description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta itemprop="image" content="https://www.quizzatopia.com/images/logo.png">



<!-- Canonical URL -->
<!-- <link rel="canonical" href="https://www.quizzatopia.com/quiz"> -->
 <link rel="canonical">
	
<!-- Author information -->
<meta name="author" content="Ron Wilson II">
<meta name="contact" content="quizzatopia@gmail.com">

<!-- Page-specific metadata -->
<meta name="subject" content="Quizzatopia Platform">
<meta name="topic" content="Quizzing, Education, Learning, Quizzes">
<meta name="geo.placename" content="Dallas, TX">
<meta name="geo.region" content="US-TX">

<!-- Language and content type -->
<meta name="content-language" content="en-US">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- Caching and expiration -->
<meta http-equiv="expires" content="Tue, 01 Jan 2024 00:00:00 GMT">
<!-- <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="pragma" content="no-cache"> -->
	

 <!-- Google AdSense code -->
 <!--  <script defer  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4968673576211489" crossorigin="anonymous"></script> -->

 <!-- Organization Schema -->
   <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Quizzatopia",
  "description": "Quizzatopia is an online platform dedicated to providing a diverse range of quizzes for individuals of all ages and backgrounds.",
  "url": "https://www.quizzatopia.com",
  "logo": "https://www.quizzatopia.com/images/logo.png",
  "sameAs": [
    "https://twitter.com/Quizzatopia",
    "https://www.facebook.com/Quizzatopia",
    "https://www.linkedin.com/company/quizzatopia",
    "https://www.reddit.com/r/Quizzatopia",
    "https://www.youtube.com/@Quizzatopia/about",
    "https://www.tiktok.com/@quizzatopia",
    "https://www.instagram.com/Quizzatopia"
  ]
}
 </script>



    <!-- Blog Schema -->
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "Quizzatopia Blog",
        "description": "The official blog of Quizzatopia, providing additional quiz-related content and insights.",
        "url": "https://quizzatopia.blogspot.com"
    }
 </script>

  

	  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Quizzatopia",
  "url": "https://www.quizzatopia.com",
  "description": "Quizzatopia is an online platform dedicated to providing a diverse range of quizzes for individuals of all ages and backgrounds.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.quizzatopia.com/quiz?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  "sameAs": [
    "https://twitter.com/Quizzatopia",
    "https://www.facebook.com/Quizzatopia",
    "https://www.linkedin.com/company/quizzatopia",
    "https://www.reddit.com/r/Quizzatopia",
    "https://www.youtube.com/@Quizzatopia",
    "https://www.tiktok.com/@quizzatopia",
    "https://www.instagram.com/Quizzatopia"
  ]
}
</script>


	  
	  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.quizzatopia.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Quizzes",
      "item": "https://www.quizzatopia.com/quizzes"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "About",
      "item": "https://www.quizzatopia.com/about"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Quiz",
      "item": "https://www.quizzatopia.com/quiz"
    }
  ]
}
</script>

	<style>
.popupMSG {
position: fixed;
    bottom: 0;
    left: 50%;
    min-width: 50%;
    transform: translate(-50%, -50%);
    background-color: #f9f9f9;
    padding: 10px;
    border: 1px solid #ccc;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    z-index: 9999;
	  display: none;

}

.popupMSG span {
  display: block;
  text-align: center;
}
</style>
	  	
	
	
	
  <!-- Chart.js library -->
  <script  src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">

  <!-- Custom CSS -->
 <!--  <link rel="stylesheet" href="/style.css">-->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="indexOptions.css">

  <!-- Import navbar and footer components -->
  <link rel="import" href="/elements/navbar.html">
  <link rel="import" href="/elements/footer.html">

  <div id="navbar"></div>
  <!-- Rest of the page content -->
  <div id="signupLoginArea"><div>

  <!-- JavaScript dependencies async -->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"  crossorigin="anonymous">


  <script  defer src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>

  <script  defer src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
	  <script  defer src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js"></script>

  <!-- Firebase SDK -->
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

  <!-- Custom scripts -->
  <script  src="/main.js" defer></script> 
	  </head>
	  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9VG78SV9KZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9VG78SV9KZ');
	  
	//  console.log('page loading??/ mmmmm???????????????????????????????:');
	  
  </script>

  <!-- Google AdSense -->

	
<body>
	<main_section>
  <!-- Rest of the page content -->

  <div id="optionContainer" class="container">
    <div class="row" style="padding: 2%;">
      <div class="col-md-6">
        <div class="quiz-options">
          <div class="form-check">
            <div id="optionsQuizNameWrap">
              <div id="optionsQuizName" class="text-center mb-4"><h1>Quiz Name</h1></div>
              <!-- Quiz Name -->
            </div>
          </div>
          <hr>
<div class="form-check">
  <input class="form-check-input" type="checkbox" id="animation-quiz">
  <label class="form-check-label" for="animation-quiz">
    Animate Quiz
  </label>
</div>

		
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="timer-checkbox">
            <label class="form-check-label" for="timer-checkbox">
              Enable Timer
            </label>
            <!-- Enable Timer Checkbox -->
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="countdown-per-question">
            <label class="form-check-label" for="countdown-per-question">
              Countdown per Question
            </label>
            <!-- Countdown per Question Checkbox -->
          </div>
          <div id="timer-timeGroup" class="form-group">
            <label for="quiz-time">Quiz Time:</label>
            <div class="input-group">
              <input type="number" id="quiz-time" name="quiz-time" value="30" class="form-control">
              <div class="input-group-append">
                <span class="input-group-text">Seconds</span>
              </div>
            </div>
            <!-- Quiz Time Input -->
          </div>

          <hr>

          <div id="testInfo" class="text-center mb-4"></div>
          <!-- Test Information Placeholder -->
          
          <p id="pie_graph_front" style="width: 50%; margin: auto;"></p>
          <!-- Pie graph -->

             <div class="text-center">
            <button id="start-btn" class="btn btn-primary btn-lg" onclick="startQuiz()">Start Quiz</button>
            <!-- Start Quiz Button -->
            <div class="quiz-image-container text-center">
              <img src="/images/lan/9.png" alt="quiz-image" class="w-100" loading="lazy">
              <!-- Quiz Image -->
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="quiz-image-container text-center">
          <img src="/images/lan/10.png" alt="quiz-image" class="w-100 d-md-block" loading="lazy">
          <!-- Quiz Image -->
        </div>






	      
	        <div class="container" style="padding: 2%;" loading="lazy">

	                    <h2 class="coach-name">Join the Discussion</h2>
		


<div id="discussionContainer" class="container" style="padding: 2%;" loading="lazy">
  <img src="https://www.quizzatopia.com/images/sq/43.png" alt="Main Discussion Picture" style="width: -webkit-fill-available;" loading="lazy">
  <p class="coach-description">A place where new members can introduce themselves, ask questions, and get acquainted with the Quizzatopia community.<br> <b>Join our community<b></b></b></p>
</div>

           
</div>
	      
</div></div></div>
	
	
  <div class="container mt-4 d-none" id="quiz-container">
    <!-- Quiz Container -->
    <div   id="quizContainer" class="layer-1">
      <!-- First Layer -->
      <div class="layer-2" id="quiz_main_area">
        <!-- Second Layer: Main Quiz Area -->
        <div id="ad-container">
          <!-- Ad Container -->
          <div id="ad-box">
             
            <p>
		  
<a href="https://www.buymeacoffee.com/Quizzatopia" target="_blank"><img src="/images/bmc.png" alt="Buy Me A Coffee" id="adPic" ></a>

	
              
            </p>
            <div id='ad-view' style="min-width:255px">
              <span id='ad-text'></span>
              <!-- Google Ad Code -->
              <!-- <span class='ad-text'>This will be an ad</span> -->
            </div>
          </div>
        </div>

	      
	
	
        <div id="quiz-timer-qn" class="d-flex justify-content-between">
          <div id="question-number" class="font-weight-bold"></div>
          <div id="timer" class="text-right"></div>
        </div>

        <div class="progress-bar-container">
          <!-- Progress Bar Container -->
          <div class="progress-bar" id="progress-bar"></div>
          <!-- Progress Bar -->
        </div>

	      
	
        <h1 id="question"></h1>
        <!-- Question heading -->
	      
	    <div id="questionImageArea" >
		    <img id="questionImage" src="/images/blank.png" alt="quiz image" loading="lazy">
	      </div>

	      
        <ul class="list-unstyled" id="optionContainers">
          <!-- Answer option containers -->
          <li><button id="option_1" class="btn btn-primary answer-option"></button></li>
          <li><button id="option_2"  class="btn btn-primary answer-option"></button></li>
          <li><button id="option_3"  class="btn btn-primary answer-option"></button></li>
          <li><button id="option_4"  class="btn btn-primary answer-option"></button></li>
        </ul>

	      
	


	
	
        <!-- Explanation area -->
        <div id="btn_container">
          <!-- Button container -->
          <button id="show-explanation-btn" class="btn btn-primary d-none mt-3"  onclick="showExplanationFunc()">Show Explanation</button>
          <button id="skip-next-btn" class="btn btn-primary mt-3"  onclick="skipOrNext()">Skip</button>
        </div>
      </div>
    </div>
  </div>

		
	
		
  <div class="explanation-container">
	  <div id="explanation_bar">Difficulty: <div id="difficulty"></div>    <div id="realQustionNum"></div>


    <button id="close-btn" class="close-button">&times;</button>
	  </div>
    <div id="explanation"></div>
  </div>

  <div class="container mt-4 d-none" id="end-container">
    <!-- End Container -->
    <h2 id="result-text"></h2>
    <!-- Result Text -->
    <h2 class="mt-4">Your Final Score</h2>
    <!-- Final Score Heading -->
    <p id="score"></p>
    <!-- Score Placeholder -->
    <p id="feedback"></p>
    <!-- Feedback Placeholder -->
    <p><span id="earnedPoints"></span></p>
    <p>
      <div class="d-none" id="badgebox">
        <span>Awards</span>
        <div id="badgeView"></div>
      </div>
    </p>
		
	
		
    <button id="retake-btn" class="btn btn-primary mt-4"  onclick="retakeQuizFunc()">Retake Quiz</button>
    <!-- Retake Quiz Button -->
    <button class="other-quiz-btn btn btn-secondary mt-4" onclick="window.location.href = '/quizzes'">Try Another Quiz</button>
    <!-- Try Another Quiz Button -->

    <div id="social-sharing" class="mt-4">
      <!-- Social Sharing Section -->
      <p>
        <a id="social_fb" href="" target="_blank" class="btn btn-social btn-facebook btn-primary"><i class="fab fa-facebook-f"></i> Share on Facebook</a>
        <!-- Share on Facebook Button -->
        <a id="social_tw" href="" target="_blank" class="btn btn-social btn-twitter btn-info"><i class="fab fa-twitter"></i> Share on Twitter</a>
        <!-- Share on Twitter Button -->
      </p>
      <p>
        <a id="social_red" href="" target="_blank" class="btn btn-social btn-reddit btn-danger"><i class="fab fa-reddit"></i> Share on Reddit</a>
        <!-- Share on Reddit Button -->
        <a id="social_ln" href="" target="_blank" class="btn btn-social btn-linkedin btn-primary" style="margin-right: 10px;"><i class="fab fa-linkedin"></i> Share on LinkedIn</a>
        <!-- Share on LinkedIn Button -->
      </p>
    </div>
				
	
		
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="Quizzatopia" data-color="#5F7FFF" data-emoji="" data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#ffffff" data-coffee-color="#FFDD00"></script>
  </div>
</main_section>

	 
	</main_section>
	
	<div id="popupMSG" class="popupMSG">
  <span id="popupMessage"></span>
</div>

	
					
	<form id="reportForm" method="POST" action="https://formspree.io/Quizzatopia@gmail.com">
  <div class="form-group">
    <label for="reportType">Report Type</label>
    <select class="form-control" id="reportType" required>
      <option value="">Select...</option>
      <option value="question">Report Question</option>
      <option value="quiz">Report Quiz Error</option>
      <option value="other">Other</option>
    </select>
  </div>
  <div class="form-group">
    <label for="reportDetails">Details</label>
    <textarea class="form-control" id="reportDetails" rows="4" required></textarea>
  </div>
  <hr>
  <button type="submit" class="btn btn-primary btn-block">Submit Report</button>
</form>
	
		

	  
	
	
	
  <div id="otherQuizzes" class="container">

  </div>

	
	
	


	
  <script>

function fetchQuizzesFromDB() {
  console.log("Fetching quizzes from the database...");
// Initialize your Firebase app

 const db = firebase.firestore();

  // Fetch the quizzes collection
  db.collection('quizzes')
 .limit(20)
    .get()
    .then((querySnapshot) => {
    const documents = querySnapshot.docs;
    const randomDocuments = [];
    const limit = 20;

    // Randomly select documents
    while (randomDocuments.length < limit && documents.length > 0) {
      const randomIndex = Math.floor(Math.random() * documents.length);
      const randomDocument = documents.splice(randomIndex, 1)[0];
      randomDocuments.push(randomDocument);
    }
      // Get the reference to the HTML container
      const quizContainer = document.getElementById('otherQuizzes');

      // Initialize the HTML string
      let html = '<h3>Other Quizzes</h3><hr><div class="otherQuizzes-column"><ul>';

      // Iterate over each quiz document
      querySnapshot.forEach((doc) => {
        const quizData = doc.data();

        // Generate the HTML for each quiz
        const quizHtml = `
          <li>
            <a href="${quizData.quizLinkDB}">
              ${quizData.quizNameDB}
            </a>
          </li>
        `;

        // Append the quiz HTML to the overall HTML string
        html += quizHtml;
      });

      // Close the unordered list and the column div
      html += '</ul></div>';

      // Update the quizContainer with the generated HTML
      quizContainer.innerHTML = html;

      console.log("Quizzes fetched and HTML updated successfully.");
    })
    .catch((error) => {
      console.error("Error fetching quizzes:", error);
    });
}
window.addEventListener("load", function() {

// Call the function to fetch and populate the quiz data
 fetchQuizzesFromDB();

	

});

	  
const element = document.getElementById("discussionContainer");
element.addEventListener("click", function() {
  window.open("https://www.quizzatopia.com/community/", "_blank");
});

	  
window.addEventListener("load", function() {


	// Check if user is logged in
  if (loggedIn   ==  false) {
		const timerId = setTimeout(() => {
			slideIn("loginPopupBody");

openPopup(); switchTab('signup'); 	
}, 5000); // Timer will execute after 5000 milliseconds (5 seconds)
	  
  }
			  	    //  console.log("loggedIn 2.... "+loggedIn);

});
	</script>
	
	
	
	
  <script>
    
	 /*
// Function to prevent body scrolling on mobile devices during drag
function preventBodyScrolling(event) {
  event.preventDefault();
}

interact('.explanation-container')
  .draggable({
    inertia: true,
    modifiers: [
      interact.modifiers.restrictRect({
        restriction: 'parent',
        endOnly: true,
      }),
    ],
    listeners: {
      move(event) {
        const target = event.target;
        const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
        const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

        target.style.transform = `translate(${x}px, ${y}px)`;
        target.setAttribute('data-x', x);
        target.setAttribute('data-y', y);
      },
      // Disable body scrolling during drag on mobile devices
      start(event) {
        if ('ontouchmove' in document.documentElement) {
          document.addEventListener('touchmove', preventBodyScrolling, { passive: false });
        }
      },
      end(event) {
        if ('ontouchmove' in document.documentElement) {
          document.removeEventListener('touchmove', preventBodyScrolling);
        }
      },
    },
  })
  .resizable({
    edges: { top: true, left: true, bottom: true, right: true },
  })
  .on('resizemove', function (event) {
    const target = event.target;
    let { x, y } = target.dataset;

    x = parseFloat(x) || 0;
    y = parseFloat(y) || 0;

    target.style.width = event.rect.width + 'px';
    target.style.height = event.rect.height + 'px';

    x += event.deltaRect.left;
    y += event.deltaRect.top;

    target.style.transform = `translate(${x}px, ${y}px)`;
    target.setAttribute('data-x', x);
    target.setAttribute('data-y', y);
  });

// You can also add additional logic for handling close button click event, etc.

*/
 
	  
    function  showPieChartFront(Correctpie,Incorrectpie){
 let Correct1 = parseInt(Correctpie);
 let Incorrect1 = parseInt(Incorrectpie);

   const chartCanvas1 = document.createElement('canvas');
chartCanvas1.id = 'pie-chart_1';
   
 
   
   // Create the data for the pie chart
 let pieData1 = {
  labels: ['Correct', 'Incorrect'],
  datasets: [{
    data: [Correct1, Incorrect1],
    backgroundColor: ['#36a2eb', '#ff6384']
  }]
};
   // Append the canvas to the chart container
const chartContainer1 = document.getElementById('pie_graph_front');
chartContainer1.appendChild(chartCanvas1);
	    
   /// console.log(Correct1+" showPieChartFront info     "+ Incorrect1); 
  
  // Get the 2D context of the canvas
const ctx = chartCanvas1.getContext('2d');



// Configure the options for the pie chart
const options1 = {
  responsive: true
};

// Create the pie chart using Chart.js
new Chart(ctx, {
  type: 'pie',
  data: pieData1,
  options: options1
});
  
 
}
	  
	  
	  
	  
	  
function calculateScore(quizInfo) {
  const totalQuestions = quizInfo.numberOfQuestions || 0;
  const correctAnswers = quizInfo.questionCorrect || 0;

  const score = correctAnswers;
  const percentage = totalQuestions > 0 ? (correctAnswers / totalQuestions) * 100 : 0;

  return {
    score,
    percentage,
  };
}

	  
	function saveQuizInfo(quizCode, quizInfo, q) {
//  console.log('???????????????????????????saveQuizInfo???????????????????????????????????????????????//');
if(quizStarted == true){
  const savedQuizInfo = JSON.parse(localStorage.getItem(`quizInfo_${quizCode}`)) || {};
  const savedScore = savedQuizInfo.questionCorrect || 0;
  const newScore = quizInfo.questionCorrect || 0;

 // console.log(savedScore + " savedScore | newScore " + newScore);

  //console.log('saveQuizInfo Quiz quizInfo:' + quizInfo);
  //console.log('saveQuizInfo Quiz Code:' + quizCode);
  //console.log('saveQuizInfo Quiz Info:' + savedQuizInfo);
 // console.log('JSON.stringify(savedQuizInfo)) Quiz Info:' + JSON.stringify(savedQuizInfo));

  if (newScore > savedScore || savedScore === 0 || savedScore === null) {
    savedQuizInfo.quizCode = quizCode;
    savedQuizInfo.quizInfo = quizInfo;
    savedQuizInfo.questionCorrect = newScore; // Update the questionCorrect value
    savedQuizInfo.quizLink = q; // Add the "q" parameter to the quizInfo object
 if (newScore > savedScore ){
	  	  updatePoints(pointsRewards);
 }
	  
	  
    // Update the quiz information for the specific quiz code
    localStorage.setItem(`quizInfo_${quizCode}`, JSON.stringify(savedQuizInfo));
  }
}
}


  // Call the saveQuizInfo function with the "q" parameter
//saveQuizInfo(quizCode, quizInfo, q);

	  
	  
	  
	  
	  
// Log the contents of the storage
function logStorageContents(quizCode) {
  const savedQuizInfo = localStorage.getItem(`quizInfo_${quizCode}`);
//  console.log('logStorageContents Quiz Code:', quizCode);
  //console.log('logStorageContents Quiz Info:', savedQuizInfo);
}


	  
	  
		  
	  
	  
	  
	  
	  
var quizLinkURL = '';

var  quizType = '';	  
    
// Get the current URL and parse its search parameters
const urlParams = new URLSearchParams(window.location.search);
	//  console.log("1 urlParams     "+urlParams); 
quizLinkURL = 	"/quiz/?"+urlParams;
	  
// Find the <link rel="canonical"> element
var canonicalLink = document.querySelector('link[rel="canonical"]');

// Update the href attribute of the <link rel="canonical"> tag
canonicalLink.href = "https://www.quizzatopia.com"+quizLinkURL;


	  
// Get the values of the "q" and "e" parameters
var q = urlParams.get('q');
var e = urlParams.get('e');
	  
console.log("E urlParams     "+e); 
	  
	  
if (q === null) {
  const files = [
    "job_interviews",
    "marvel_cinematic_universe",
    "middle_school_math",
    "high_school_science",
    "movies",
    "hip_hop",
    "pop_culture"
  ];
//console.log("1 random     "+q);
	
	  function getRandomFile(files) {
    return files[Math.floor(Math.random() * files.length)];
  }

  q = getRandomFile(files);
}
  
	  
	  
	  let str = q;

if (str.startsWith("TF_")) {
	console.log("True/False     "); 
//  q = str.substr(3); // Remove the first three characters
//	quizType = "True/False";
	document.getElementById("option_3").style.display= "none";
	document.getElementById("option_4").style.display= "none";

}else{
	document.getElementById("option_3").style.display= "initial";
	document.getElementById("option_4").style.display= "initial";
		quizType = "Multi-Choice";

		//console.log(" Multi-Choice     "); 

}


var descriptionLink = document.querySelector('meta[name="description"]');
descriptionLink.setAttribute("content", "Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. "+q);



	

    //  var newStr = q.replace(/_/g, " ");
	  
	  
	  

	  
//document.getElementById("msg_quiz_name").innerHTML = newStr;
//document.getElementById("optionsQuizName").innerHTML = newStr;
	  
document.getElementById("social_fb").href = "https://www.facebook.com/sharer/sharer.php?u=https://quizzatopia.com/quiz/?q="+q;
document.getElementById("social_tw").href = "https://twitter.com/intent/tweet?url=https://quizzatopia.com/quiz/?q="+q;
document.getElementById("social_ln").href = "ttps://www.linkedin.com/shareArticle?url=https://quizzatopia.com/quiz/?q="+q;
document.getElementById("social_red").href = "https://www.reddit.com/submit?url=https://quizzatopia.com/quiz/?q="+q;
    
	  
	  
	  
  
	  
	  
	  
	  

	  function removeTF(q) {

// Use the value of "q"
//console.log("urlParams 875:    "+q); 

if (str.startsWith("TF")) {
 q = str.substr(2); // Remove the first three characters
	return q;
}
	  
	  
	  }
	  
	

	  
async function saveQuizToDB(quiz) {
  const { quizCodeX, quizNameX, imageURLX, quizJsonX, numberOfQuestionsX, quizLinkX, quizDifficultyX } = quiz;

  const db = firebase.firestore();

  // Check if quiz already exists in Firestore
  const querySnapshot = await db.collection('quizzes').where('quizCodeDB', '==', quizCodeX).get();

  if (!querySnapshot.empty) {
    showPopup(`Quiz with code ${quizCodeX} already saved.`);
  } else {
    // Set quizDifficulty to an empty string if it is undefined
    const difficulty2 = typeof quizDifficultyX !== 'undefined' ? quizDifficultyX : '';

    // Check if required fields have valid values
    if (
      typeof quizCodeX !== 'undefined' &&
      typeof quizNameX !== 'undefined' &&
      typeof imageURLX !== 'undefined' &&
      typeof numberOfQuestionsX !== 'undefined' &&
      typeof quizLinkX !== 'undefined'
    ) {
      // Save quiz information to Firestore with an automatically generated document ID
      await db.collection('quizzes').add({
        quizCodeDB: quizCodeX,
        quizNameDB: quizNameX,
        imageURLDB: imageURLX,
        quizJsonDB: quizJsonX,	      
        numberOfQuestionsDB: numberOfQuestionsX,
        quizLinkDB: quizLinkX,
        quizDifficultyDB: difficulty2,
	    quizStartedCount: 0 // Initialize the quizStartedCount to 0

      });
	      
      showPopup(`Quiz with code ${quizCodeX} saved successfully.`);
    } else {
      showPopup('Invalid quiz data. Please provide all required fields.');
    }
  }
}


function showPopup(message) {
  const popup = document.getElementById('popupMSG');
  const popupMessage = document.getElementById('popupMessage');
  popupMessage.textContent = message;
  popup.style.display = 'block';

  setTimeout(() => {
    popup.style.display = 'none';
  }, 3000); // Hide the popup after 3 seconds
}

	  
	  
	  
	  

	  
	  
	  
	  
	  
	  
	  
	  
	  
	  

	  
 
let questions = [];
let quizCode;
let quizName;
let numberOfQuestions;
let quizImageURL;
let quizDifficulty;
let questionNumber;
let questionType;

let difficulty;
let imageURL;
	  
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
	  
	  

	  
// Retrieve the stored test information and display it
// Retrieve the stored test information and display it
// Retrieve the stored test information and display it
function displayTestInfo(quizCodeNS, quizNameNS, numberOfQuestionsNS, quizImageURL_NS, quizDifficultyNS) {
  const storedQuizInfo = localStorage.getItem(`quizInfo_${quizCode}`);
  if (storedQuizInfo) {
    try {
      const quizInfo = JSON.parse(storedQuizInfo);
      const testInfoDiv = document.getElementById('testInfo');

      // Calculate user score and completion percentage
      const { score, percentage } = calculateScore(quizInfo);
      let ansWrong = numberOfQuestions - score;

	    if(score > 0){
      // Show the pie chart for correct and incorrect answers
      showPieChartFront(score, ansWrong);
	    }
      testInfoDiv.innerHTML = `
        <h3>Quiz Information</h3>
        <p><strong>Quiz Code:</strong> ${quizInfo.quizCode}</p>
        <p><strong>Quiz Type:</strong> ${quizType}</p>
      <p><strong>Quiz Difficulty:</strong> ${quizDifficultyNS || 'N/A'}</p>
        <p><strong>Number of Questions:</strong> ${quizInfo.numberOfQuestions}</p>
        <p><strong>Question Correct:</strong> ${score}</p>
        <p><strong>Best Score:</strong> ${percentage.toFixed(0)}%</p>
      `;
	    
	    	// Update the title tag
document.title = `${quizNameNS}`;
  
	      const optionsQuizNameDiv = document.getElementById('optionsQuizName');
    optionsQuizNameDiv.innerHTML = `<h1>${quizNameNS}<h1>`;
	    
      logStorageContents(quizInfo.quizCode);

    } catch (error) {
      console.error('Error parsing stored quiz info:', error);
      // Handle error, display appropriate message or fallback behavior
    }
  } else {
    // Handle case where there is no stored quiz info, display appropriate message or fallback behavior
    const testInfoDiv = document.getElementById('testInfo');
    testInfoDiv.innerHTML = `
        <h3>Quiz Information</h3>
        <p><strong>Quiz Code:</strong> ${quizCodeNS}</p>
        <p><strong>Quiz Type:</strong> ${quizType}</p>
      <p><strong>Quiz Difficulty:</strong> ${quizDifficultyNS || 'N/A'}</p>
        <p><strong>Number of Questions:</strong> ${numberOfQuestionsNS}</p>
        <p><strong>No quiz information found.</strong></p>
      `;
	      	// Update the title tag
document.title = `${quizNameNS}`;
	      const optionsQuizNameDiv = document.getElementById('optionsQuizName');
    optionsQuizNameDiv.innerHTML = `<h1>${quizNameNS}<h1>`;
  }
}

// Check if quizCode matches and retrieve or save quiz info
function checkQuizCodeAndGetInfo(quizCodeNS, quizNameNS, numberOfQuestionsNS, quizImageURL, quizUrl) {
  const savedQuizInfo = localStorage.getItem(`quizInfo_${quizCode}`);
  let quizInfo;
  let timestamp = new Date().toLocaleString();

  if (!savedQuizInfo) {
    // Quiz info doesn't exist, save new quiz info to storage
    quizInfo = {
      quizCode: quizCodeNS,
      quizName: quizNameNS,
      quizImageURL: quizImageURL,
      quizType: quizType,
      numberOfQuestions: numberOfQuestionsNS,
      questionCorrect: 0,
      timestamp: timestamp,
	quizLink: quizUrl  // Add the "q" parameter to the quizInfo object

    };

   // localStorage.setItem(`quizInfo_${quizCode}`, JSON.stringify(quizInfo));
  } else {
    // Quiz info exists, retrieve existing quiz info from storage
    quizInfo = JSON.parse(savedQuizInfo);
    quizInfo.quizName = quizNameNS;
    quizInfo.quizImageURL = quizImageURL;
      quizInfo.quizType = quizType;
    quizInfo.numberOfQuestions = numberOfQuestionsNS;
    quizInfo.timestamp = timestamp;
quizInfo.quizLink = quizUrl;  // Add the "q" parameter to the quizInfo object
    localStorage.setItem(`quizInfo_${quizCode}`, JSON.stringify(quizInfo));
  }

  return quizInfo;

}
	  
let quizUrl;

function fetchData(q, e) {
	      console.log("fetchDataq:", q+'   e:    '+e);

  let stringEnt;
  if (e) {
	  
    console.log("New JSON structure");
    stringEnt = "/q/"+e+"/" + q + ".json";
  } else {
    console.log("Old JSON structure");
    stringEnt = "/q/" + q + ".json";
  }
     console.log("stringEnt URL:", stringEnt);
	
quizUrl = stringEnt;
   fetch(stringEnt)
    .then(response => response.json())
    .then(data => {
      if (Array.isArray(data)) {
        // Handle old JSON structure
        console.log("Old JSON structure");

        if (data.length === 0) {
          // Handle empty data
          console.log("Empty data");
          const randomFile = getRandomFile(files);
          fetchData(randomFile);
        } else {
          // Use the questions data here
          const questionData = data.map(questionObj => ({
            question: questionObj.question,
            answer: questionObj.answer,
            options: questionObj.options,
            difficulty: questionObj.difficulty,
            imageURL: questionObj.imageURL,
            questionType: questionObj.questionType,
            questionNumber: questionObj.questionNumber,
            explanation: questionObj.explanation
          }));
		
          // Update quizCode, quizName, numberOfQuestions
          quizCode = "";
          quizName = "";
          numberOfQuestions = data.length;
	quizImageURL = "";
	quizDifficulty = "";
		// quizUrl = stringEnt;

          // Check quiz code and retrieve or save quiz info
          const quizInfo = checkQuizCodeAndGetInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty, quizUrl);

          questions.push(...questionData);
          shuffleArray(questions);

          // Access and use the retrieved quiz information
          const questionsCompleted = quizInfo.questionsCompleted;

          // Display the test information
          displayTestInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);
		

	      
		
        }
      } else {
        // Handle new JSON structure

        if (data.questions.length === 0) {
          // Handle empty data
          console.log("Empty data");
          const randomFile = getRandomFile(files);
          fetchData(randomFile);
        } else {
          // Use the questions data here
          const questionData = data.questions.map(questionObj => ({
            question: questionObj.question,
            answer: questionObj.answer,
            options: questionObj.options,
            difficulty: questionObj.difficulty,
            imageURL: questionObj.imageURL,
            questionType: questionObj.questionType,
            questionNumber: questionObj.questionNumber,
            explanation: questionObj.explanation
          }));

          // Update quizCode, quizName, numberOfQuestions
          quizCode = data.quizCode;
          quizName = data.quizName;
          numberOfQuestions = data.numberOfQuestions;
          quizImageURL = data.quizImageURL;
          quizDifficulty = data.quizDifficulty;
          questionNumber = data.questionNumber;
		questionType = data.questionType;

          // Check quiz code and retrieve or save quiz info
          const quizInfo = checkQuizCodeAndGetInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);

          questions.push(...questionData);
          shuffleArray(questions);

          // Access and use the retrieved quiz information
          const questionsCompleted = quizInfo.questionsCompleted;

          // Display the test information
          displayTestInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);
        }
	      
	      
//quizDifficulty = typeof quizDifficulty !== 'undefined' ? quizDifficulty : "";
let q_link = "/quiz"+q;
	      
const quizZZ = {
  quizCodeX: quizCode,
  quizNameX: quizName,
  imageURLX: "https://www.quizzatopia.com/images/sq/_.png",
  numberOfQuestionsX: numberOfQuestions,
  quizJsonX: quizUrl,
  quizLinkX: quizLinkURL ? quizLinkURL : q_link, // Use 'q' if quizLinkURL is empty
  quizDifficultyX: quizDifficulty ? quizDifficulty : ""
};


console.log("quizZZ:", quizZZ);

	      if (e === null || e === "") {}else{

saveQuizToDB(quizZZ);
	      }    
	      
	      
      }
     })
    .catch(error => console.error(error));
}

	
	  
fetchData(q, e);



	      // Get the modal element
const reportModal = document.getElementById('reportModal');

// Get the form element
//const reportForm = document.getElementById('reportForm');

// Add submit event listener to the form
reportForm.addEventListener('submit', function (e) {
  e.preventDefault();

  // Get the selected report type and details
  const reportType = document.getElementById('reportType').value;
  const reportDetails = document.getElementById('reportDetails').value;

  // Perform any necessary actions with the report data
  // For example, you can send an AJAX request to report the problem


// Function to open the modal
function openModal() {
  reportModal.style.display = 'block';
  reportModal.style.opacity = '1';
	 console.log("openModal      "); 
}

// Function to close the modal
function closeModal() {
  reportModal.style.display = 'none';
  reportModal.style.opacity = '0';

}

// Add click event listener to the report button
document.getElementById('report_BTN').addEventListener('click', openModal);

// Add click event listener to the close button
document.getElementById('closeReportBTN').addEventListener('click', closeModal);

// Add click event listener to the modal overlay
document.addEventListener('click', function (e) {
  if (e.target === reportModal) {
    closeModal();
  }
});

	      
	  // Close the modal
  closeModal();
});

if (  q === null || q === '') {
  console.log("empty.");

  //window.location.href = "https://quizzatopia.com/quiz/?q=" + q;
  location.reload();
}else{
          console.log("Q:   "+q);
	
}


// Check if animation is enabled in local storage
const storedUserInfo = localStorage.getItem('userInfo');
var isAnimationEnabled;
var animationCheckbox = document.getElementById('animation-quiz');

if (storedUserInfo) {
  const userInfo = JSON.parse(storedUserInfo);
  // Access the animationEnabled property
  isAnimationEnabled = userInfo.animationEnabled;
  // Use the isAnimationEnabled value as needed
	animationCheckbox.checked = isAnimationEnabled;
} else {
  // Handle case when no user info is stored in the local storage
  isAnimationEnabled = false;
	animationCheckbox.checked = isAnimationEnabled;
}

animationCheckbox.addEventListener('change', function() {
  const storedUserInfo = localStorage.getItem('userInfo');
  const userInfo = storedUserInfo ? JSON.parse(storedUserInfo) : {};
  userInfo.animationEnabled = this.checked;
isAnimationEnabled = userInfo.animationEnabled;
  localStorage.setItem('userInfo', JSON.stringify(userInfo));
});
  
	      
    </script>

	  <script src="script.js" defer></script>


 </body>
	
</html>


